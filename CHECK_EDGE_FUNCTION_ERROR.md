# Edge Function エラーの確認方法

## 500エラーが発生した場合

Edge Functionのログを確認して、具体的なエラーメッセージを確認してください。

## ログの確認手順

### ステップ1: Supabaseダッシュボードを開く
1. https://supabase.com/dashboard にアクセス
2. プロジェクトを選択

### ステップ2: Edge Functionsのログを確認
1. 左メニューの「Edge Functions」をクリック
2. `create-user-and-send-invite` 関数をクリック
3. 「Logs」タブをクリック
4. 最新のログ（エラーメッセージ）を確認

### ステップ3: エラーメッセージを確認
ログに表示されるエラーメッセージを確認してください。

**よくあるエラー：**

1. **"listUsers"関連のエラー**
   → ユーザー数が多い場合、パフォーマンスの問題が発生する可能性があります

2. **"パスワード更新エラー"**
   → 既存ユーザーのパスワード更新に失敗している可能性があります

3. **"usersテーブルへの保存エラー"**
   → usersテーブルのRLSポリシーを確認してください

4. **"Resend APIキーが設定されていません"**
   → Secretsに `RESEND_API_KEY` を追加してください

## ログの内容を共有

ログに表示されるエラーメッセージ（特に赤いエラーメッセージ）を共有していただければ、より具体的な解決方法を提案できます。

## ログが見つからない場合

1. 関数が正しくデプロイされているか確認
2. 関数を再度デプロイしてみる
3. ブラウザをリロードして再度登録を試す


