# Edge Functionの更新方法

## Supabaseエディタでコードを上書きする手順

### ステップ1: エディタを開く
1. Supabaseダッシュボード → 「Edge Functions」
2. `create-user-and-send-invite` 関数をクリック
3. コードエディタが開きます

### ステップ2: 既存のコードを全部選択
1. エディタ内のどこかをクリック（フォーカスを当てる）
2. **全部選択**する：
   - Mac: `Cmd + A`
   - Windows: `Ctrl + A`
3. これでエディタ内のコードが全部選択されます（青く反転）

### ステップ3: 削除
1. **Delete**キーまたは**Backspace**キーを押す
2. エディタが空になります

### ステップ4: 新しいコードを貼り付け
1. ローカルのファイル `supabase/functions/create-user-and-send-invite/index.ts` を開く
2. **全部選択**（`Cmd + A` / `Ctrl + A`）
3. **全部コピー**（`Cmd + C` / `Ctrl + C`）
4. Supabaseのエディタに**貼り付け**（`Cmd + V` / `Ctrl + V`）

### ステップ5: デプロイ
1. 画面下部の緑色の「Deploy function」ボタンをクリック
2. デプロイが完了するまで待つ

## 今後の運用管理方法

### 推奨される管理方法

#### 1. ローカルファイルを「正」とする
- **ローカルのファイル**（`supabase/functions/create-user-and-send-invite/index.ts`）が「正しいバージョン」
- Supabaseのエディタは「実行環境」として扱う
- コードの変更は**必ずローカルファイルで行う**

#### 2. 変更の流れ
```
ローカルファイルを編集
    ↓
Supabaseエディタにコピー＆ペースト
    ↓
デプロイ
    ↓
動作確認
```

#### 3. バージョン管理
- ローカルファイルは**Gitで管理**する
- 変更履歴を残す
- 他の開発者と共有できる

### ファイル構成の理解

```
supabase/functions/
  └── create-user-and-send-invite/
      └── index.ts  ← これが「正しいバージョン」
```

**Supabaseのエディタ** = 実行環境（一時的な作業場所）
**ローカルファイル** = 正しいバージョン（永続的に保存）

### よくある質問

**Q: Supabaseのエディタで直接編集してもいい？**
A: 開発中はOKですが、**必ずローカルファイルにも反映**してください。そうしないと、次回デプロイ時に変更が消えます。

**Q: どちらが正しい？**
A: **ローカルファイルが正**です。Supabaseのエディタは実行環境なので、ローカルファイルからコピーして使います。

**Q: 変更したらどうする？**
A: 
1. ローカルファイルを編集
2. Supabaseエディタにコピー＆ペースト
3. デプロイ
4. Gitにコミット（変更履歴を残す）

### トラブル時の対処

**エディタのコードが消えた**
→ ローカルファイルから再度コピー＆ペースト

**ローカルファイルとエディタの内容が違う**
→ ローカルファイルを正として、エディタを上書き

**どちらが最新かわからない**
→ ローカルファイルを正として扱う


